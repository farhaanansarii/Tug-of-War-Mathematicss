<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<title>Tug of War ‚Äì Mathematics</title>
<style>
/* =============================================
   GLOBAL RESET & ROOT
============================================= */
*, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }

:root {
  --blue:       #1A4FC4;
  --blue-l:     #5B9BD5;
  --blue-d:     #0B2D8C;
  --red:        #C41A1A;
  --red-l:      #E05252;
  --red-d:      #8C0B0B;
  --gold:       #FFD600;
  --gold-d:     #E6A800;
  --bg:         #0D1B2A;
  --panel-blue: rgba(10,35,100,0.55);
  --panel-red:  rgba(100,10,10,0.55);
  --text:       #F0F4FF;
  --subtext:    rgba(240,244,255,0.55);
  --radius:     14px;
}

html, body {
  width: 100%; height: 100%;
  overflow: hidden;
  font-family: 'Georgia', 'Times New Roman', serif;
  background: var(--bg);
  color: var(--text);
  touch-action: manipulation;
  -webkit-tap-highlight-color: transparent;
}

/* =============================================
   SCREENS
============================================= */
.screen { display: none; width: 100vw; height: 100vh; }
.screen.active { display: flex; }

/* =============================================
   START SCREEN
============================================= */
#start-screen {
  flex-direction: column;
  align-items: center;
  justify-content: center;
  gap: clamp(14px, 2.5vh, 28px);
  background:
    radial-gradient(ellipse at 25% 40%, rgba(26,79,196,0.22) 0%, transparent 55%),
    radial-gradient(ellipse at 75% 60%, rgba(196,26,26,0.22) 0%, transparent 55%),
    linear-gradient(160deg, #060d1a 0%, #0d1b2a 50%, #06100d 100%);
  padding: 20px;
}

.game-title {
  font-size: clamp(1.8rem, 5.5vw, 4rem);
  font-weight: 900;
  text-align: center;
  line-height: 1.1;
  letter-spacing: 1px;
  text-shadow: 0 2px 20px rgba(255,214,0,0.3);
}
.game-title .accent { color: var(--gold); }

.game-subtitle {
  font-size: clamp(0.7rem, 2vw, 1rem);
  color: var(--subtext);
  text-transform: uppercase;
  letter-spacing: 4px;
  text-align: center;
}

.diff-section { display: flex; flex-direction: column; align-items: center; gap: 10px; }
.diff-label { font-size: 0.75rem; color: var(--subtext); text-transform: uppercase; letter-spacing: 3px; }
.diff-row { display: flex; gap: 10px; }

.diff-btn {
  padding: 10px 24px;
  border: 2px solid rgba(255,255,255,0.18);
  background: transparent;
  color: var(--text);
  font-size: clamp(0.8rem, 2vw, 0.95rem);
  font-family: inherit;
  border-radius: 50px;
  cursor: pointer;
  transition: all 0.25s;
  text-transform: uppercase;
  letter-spacing: 1px;
}
.diff-btn:hover { border-color: var(--gold); color: var(--gold); }
.diff-btn.active { background: var(--gold); color: #000; border-color: var(--gold); font-weight: 700; }

.start-btn {
  padding: clamp(12px,2.5vh,18px) clamp(36px,6vw,60px);
  background: linear-gradient(135deg, var(--gold) 0%, #FF9800 100%);
  color: #000;
  font-size: clamp(1rem, 2.5vw, 1.3rem);
  font-weight: 700;
  font-family: inherit;
  border: none;
  border-radius: 50px;
  cursor: pointer;
  transition: all 0.3s;
  text-transform: uppercase;
  letter-spacing: 2px;
  box-shadow: 0 6px 30px rgba(255,214,0,0.35);
}
.start-btn:hover { transform: translateY(-3px); box-shadow: 0 12px 40px rgba(255,214,0,0.5); }
.start-btn:active { transform: translateY(0); }

/* =============================================
   GAME SCREEN
============================================= */
#game-screen {
  flex-direction: column;
  height: 100vh;
  overflow: hidden;
}

/* TOP BAR */
.top-bar {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: clamp(5px,1vh,10px) clamp(8px,2vw,18px);
  background: rgba(0,0,0,0.45);
  border-bottom: 1px solid rgba(255,255,255,0.08);
  gap: 8px;
  flex-shrink: 0;
  z-index: 20;
}

.score-pill {
  display: flex;
  align-items: center;
  gap: 10px;
  padding: clamp(4px,0.8vh,8px) clamp(10px,2vw,20px);
  border-radius: 50px;
  font-weight: 700;
}
.score-pill.blue { background: linear-gradient(135deg, var(--blue-d), var(--blue)); }
.score-pill.red  { background: linear-gradient(135deg, var(--red), var(--red-d)); }
.score-pill-label {
  font-size: clamp(0.5rem,1.2vw,0.72rem);
  color: rgba(255,255,255,0.7);
  text-transform: uppercase;
  letter-spacing: 1px;
  line-height: 1;
}
.score-pill-num {
  font-size: clamp(1.1rem,2.8vw,1.8rem);
  line-height: 1;
}

.top-center { display: flex; flex-direction: column; align-items: center; gap: 2px; }
.top-timer-label { font-size: clamp(0.45rem,1.2vw,0.62rem); color: var(--subtext); text-transform: uppercase; letter-spacing: 2px; }
.top-timer {
  font-size: clamp(1.5rem,3.8vw,2.4rem);
  font-weight: 900;
  color: var(--gold);
  line-height: 1;
  min-width: 48px;
  text-align: center;
  transition: color 0.3s;
}
.top-timer.urgent { color: var(--red-l); animation: urgBlink 0.5s infinite; }
@keyframes urgBlink { 0%,100%{opacity:1} 50%{opacity:0.2} }

/* PROGRESS BARS */
.progress-strip {
  display: flex;
  gap: 6px;
  padding: 5px clamp(8px,2vw,18px);
  background: rgba(0,0,0,0.3);
  border-bottom: 1px solid rgba(255,255,255,0.05);
  flex-shrink: 0;
}
.prog-track { flex:1; height: 6px; background: rgba(255,255,255,0.08); border-radius: 10px; overflow: hidden; }
.prog-fill { height: 100%; border-radius: 10px; width: 0%; transition: width 0.4s ease; }
.prog-track.blue .prog-fill { background: linear-gradient(90deg, var(--blue-d), var(--blue-l)); }
.prog-track.red  .prog-fill { background: linear-gradient(90deg, var(--red-l), var(--red-d)); }

/* MAIN GAME AREA */
.game-main {
  display: flex;
  flex: 1;
  overflow: hidden;
}

/* ‚îÄ‚îÄ TEAM PANELS ‚îÄ‚îÄ */
.team-panel {
  display: flex;
  flex-direction: column;
  gap: clamp(5px,1vh,10px);
  padding: clamp(7px,1.2vw,13px);
  flex-shrink: 0;
  position: relative;
  overflow: hidden;
  width: clamp(180px, 21vw, 300px);
}
.team-panel.blue {
  background: var(--panel-blue);
  border-right: 1px solid rgba(91,155,213,0.2);
  backdrop-filter: blur(10px);
}
.team-panel.red {
  background: var(--panel-red);
  border-left: 1px solid rgba(224,82,82,0.2);
  backdrop-filter: blur(10px);
}

.panel-header { display: flex; align-items: center; justify-content: space-between; }
.team-name {
  font-size: clamp(0.72rem,1.4vw,0.95rem);
  font-weight: 700;
  text-transform: uppercase;
  letter-spacing: 2px;
}
.q-badge {
  font-size: clamp(0.58rem,1.1vw,0.72rem);
  color: var(--subtext);
  background: rgba(255,255,255,0.08);
  padding: 2px 9px;
  border-radius: 20px;
}

.question-box {
  background: rgba(255,255,255,0.07);
  border: 1px solid rgba(255,255,255,0.12);
  border-radius: var(--radius);
  padding: clamp(7px,1.5vh,14px) clamp(6px,1vw,10px);
  text-align: center;
}
.question-text {
  font-size: clamp(1.4rem,3.2vw,2.6rem);
  font-weight: 900;
  letter-spacing: 3px;
  line-height: 1;
}
.answer-input {
  width: 100%;
  margin-top: 7px;
  background: rgba(255,255,255,0.1);
  border: 2px solid rgba(255,255,255,0.18);
  border-radius: 10px;
  padding: clamp(5px,1vh,9px);
  font-size: clamp(1rem,2.2vw,1.5rem);
  color: var(--text);
  text-align: center;
  font-family: inherit;
  font-weight: 700;
  outline: none;
  transition: border-color 0.3s;
  -moz-appearance: textfield;
  appearance: textfield;
  pointer-events: none; /* prevent keyboard popup on mobile */
}
.answer-input::-webkit-inner-spin-button,
.answer-input::-webkit-outer-spin-button { -webkit-appearance: none; }
.answer-input.shake { animation: shake 0.4s ease; border-color: var(--red-l) !important; }
@keyframes shake {
  0%,100%{transform:translateX(0)}
  20%{transform:translateX(-7px)} 40%{transform:translateX(7px)}
  60%{transform:translateX(-5px)} 80%{transform:translateX(5px)}
}
.answer-input.flash-ok { border-color: #4CAF50 !important; }

/* KEYPAD */
.keypad {
  display: grid;
  grid-template-columns: repeat(3,1fr);
  gap: clamp(3px,0.6vh,6px);
  flex: 1;
}
.key {
  border: none;
  border-radius: 8px;
  font-size: clamp(0.82rem,1.7vw,1.15rem);
  font-weight: 700;
  font-family: inherit;
  cursor: pointer;
  transition: transform 0.1s, background 0.12s;
  /* KEY FIX: use touch-action none to prevent ghost clicks */
  touch-action: manipulation;
  -webkit-user-select: none;
  user-select: none;
  min-height: clamp(33px,5.5vh,52px);
  display: flex;
  align-items: center;
  justify-content: center;
}
.key:active { transform: scale(0.91); }
.team-panel.blue .key.digit { background: rgba(91,155,213,0.18); color:#fff; border:1px solid rgba(91,155,213,0.28); }
.team-panel.blue .key.digit:hover { background: var(--blue); }
.team-panel.red  .key.digit { background: rgba(224,82,82,0.18);  color:#fff; border:1px solid rgba(224,82,82,0.28); }
.team-panel.red  .key.digit:hover { background: var(--red); }
.key.clear { background:rgba(255,152,0,0.22); color:#FFB300; border:1px solid rgba(255,152,0,0.32); font-size:clamp(0.6rem,1.3vw,0.85rem); }
.key.clear:hover { background:rgba(255,152,0,0.45); }
.key.submit { background:linear-gradient(135deg,#1B5E20,#388E3C); color:#fff; border:1px solid #4CAF50; font-size:clamp(0.6rem,1.3vw,0.85rem); }
.key.submit:hover { background:linear-gradient(135deg,#2E7D32,#43A047); }

/* DONE STATE */
.team-panel.done { opacity:0.55; pointer-events:none; }
.team-panel.done::after {
  content:'‚úì Finished!';
  position:absolute; inset:0;
  display:flex; align-items:center; justify-content:center;
  font-size:clamp(1.1rem,2.5vw,1.8rem);
  color:var(--gold);
  background:rgba(0,0,0,0.6);
  border-radius:8px;
  font-weight:700;
}

/* =============================================
   CENTER ARENA
============================================= */
.arena {
  flex:1;
  display:flex;
  flex-direction:column;
  align-items:center;
  justify-content:center;
  position:relative;
  overflow:hidden;
  min-width:0;
}

/* Ground */
.ground {
  position:absolute; bottom:0; left:0; right:0;
  height:33%;
  background:linear-gradient(180deg, rgba(34,80,20,0.3) 0%, rgba(10,30,5,0.7) 100%);
  border-top:2px solid rgba(60,140,30,0.25);
}
.ground::before {
  content:''; position:absolute; top:-5px; left:0; right:0; height:10px;
  background:repeating-linear-gradient(90deg, rgba(55,130,25,0.7) 0px, rgba(55,130,25,0.7) 3px, transparent 3px, transparent 9px);
}

/* Sky glow */
.arena::before {
  content:''; position:absolute; inset:0; pointer-events:none;
  background:radial-gradient(ellipse at 50% 28%, rgba(30,60,120,0.22) 0%, transparent 68%);
}

/* Drifting clouds */
.cloud { position:absolute; background:rgba(255,255,255,0.05); border-radius:50px; animation:drift linear infinite; }
@keyframes drift { from{transform:translateX(-160px)} to{transform:translateX(calc(100vw+160px))} }

/* ARENA SCORE PILLS */
.arena-score-row {
  position:relative; z-index:10;
  display:flex; gap:clamp(10px,2vw,22px);
  margin-bottom:clamp(6px,1.2vh,14px);
}
.arena-pill {
  padding:clamp(3px,0.7vh,7px) clamp(14px,2.5vw,26px);
  border-radius:50px;
  font-size:clamp(0.9rem,2.3vw,1.5rem);
  font-weight:900;
  color:#fff;
}
.arena-pill.blue { background:var(--blue); box-shadow:0 4px 18px rgba(26,79,196,0.45); }
.arena-pill.red  { background:var(--red);  box-shadow:0 4px 18px rgba(196,26,26,0.45); }

/* ROPE STAGE */
.rope-stage {
  position:relative;
  width:100%;
  height:clamp(110px, 26vh, 210px);
  display:flex;
  align-items:flex-end;
}

/* Win zones */
.win-zone {
  position:absolute; bottom:0; top:0; width:12%;
  display:flex; align-items:center; justify-content:center;
  font-size:clamp(0.45rem,0.9vw,0.62rem);
  text-transform:uppercase; letter-spacing:1px;
  color:rgba(255,255,255,0.3);
  pointer-events:none;
  writing-mode:vertical-lr;
}
.win-zone.left  { left:0; background:linear-gradient(90deg,rgba(26,79,196,0.16),transparent); transform:rotate(180deg); }
.win-zone.right { right:0; background:linear-gradient(-90deg,rgba(196,26,26,0.16),transparent); }

/* Center flag */
.center-flag {
  position:absolute; left:50%; bottom:0; top:0;
  width:2px; transform:translateX(-50%);
  z-index:8;
  display:flex; flex-direction:column; align-items:center;
}
.flag-pole {
  width:2px; flex:1;
  background:repeating-linear-gradient(180deg,
    rgba(255,255,255,0.65) 0px, rgba(255,255,255,0.65) 5px,
    transparent 5px, transparent 11px);
}
.flag-icon { font-size:clamp(0.9rem,2.2vw,1.4rem); filter:drop-shadow(0 0 6px var(--gold)); margin-bottom:2px; }

/* MOVERS (rope + players slide together) */
.movers {
  position:absolute; inset:0;
  transition:transform 0.55s cubic-bezier(0.34,1.35,0.64,1);
  will-change:transform;
}

/* ROPE */
.rope {
  position:absolute; left:0; right:0;
  top:44%; transform:translateY(-50%);
  height:clamp(9px,1.6vh,14px);
  background:repeating-linear-gradient(90deg,
    #8B5E3C 0px,#6B4226 7px,
    #9C6B44 7px,#7B4F2E 14px,
    #5D3A1A 14px,#8B5E3C 21px);
  border-radius:7px;
  box-shadow:0 3px 10px rgba(0,0,0,0.6), inset 0 2px 3px rgba(255,200,140,0.12), inset 0 -1px 2px rgba(0,0,0,0.3);
}
.rope::after {
  content:''; position:absolute; inset:0; border-radius:7px;
  background:repeating-linear-gradient(-45deg,
    transparent 0px,transparent 3px,rgba(0,0,0,0.1) 3px,rgba(0,0,0,0.1) 4px);
}

/* TEAM GROUPS */
.team-group { position:absolute; bottom:0; display:flex; align-items:flex-end; }
.team-group.left  { left:4%; gap:clamp(-6px,-0.8vw,0px); }
.team-group.right { right:4%; flex-direction:row-reverse; gap:clamp(-6px,-0.8vw,0px); }

/* Individual player figure */
.player-fig {
  width:clamp(30px,5vw,65px);
  height:clamp(65px,13vh,135px);
  flex-shrink:0;
  filter:drop-shadow(0 4px 7px rgba(0,0,0,0.55));
}

/* Pull animations */
@keyframes pullLeft  { 0%,100%{transform:rotate(-4deg) translateY(0)} 45%{transform:rotate(2.5deg) translateY(-4px)} }
@keyframes pullRight { 0%,100%{transform:rotate(4deg)  translateY(0)} 45%{transform:rotate(-2.5deg) translateY(-4px)} }
.team-group.left  .player-fig { animation:pullLeft  0.72s ease-in-out infinite; }
.team-group.right .player-fig { animation:pullRight 0.72s ease-in-out infinite; }
.player-fig:nth-child(2) { animation-delay:0.13s !important; }
.player-fig:nth-child(3) { animation-delay:0.26s !important; }

/* =============================================
   FLASH OVERLAYS
============================================= */
.flash-overlay { position:fixed; inset:0; pointer-events:none; z-index:100; opacity:0; }
.flash-overlay.t1 { background:radial-gradient(ellipse at 8% 50%,rgba(26,79,196,0.48),transparent 65%); }
.flash-overlay.t2 { background:radial-gradient(ellipse at 92% 50%,rgba(196,26,26,0.48),transparent 65%); }
.flash-overlay.show { animation:doFlash 0.65s ease forwards; }
@keyframes doFlash { 0%{opacity:1} 100%{opacity:0} }

/* =============================================
   WINNER SCREEN
============================================= */
#winner-screen {
  flex-direction:column; align-items:center; justify-content:center;
  gap:clamp(14px,2.5vh,26px); padding:20px;
  background:
    radial-gradient(ellipse at 30% 40%,rgba(26,79,196,0.2),transparent 55%),
    radial-gradient(ellipse at 70% 60%,rgba(196,26,26,0.2),transparent 55%),
    linear-gradient(160deg,#060d1a,#0d1b2a);
}
.winner-crown { font-size:clamp(2rem,5.5vw,3.8rem); animation:bounce 0.8s infinite alternate; }
@keyframes bounce { from{transform:translateY(0)} to{transform:translateY(-10px)} }
.winner-title { font-size:clamp(2rem,6.5vw,4.2rem); font-weight:900; color:var(--gold); text-shadow:0 0 40px var(--gold); letter-spacing:3px; text-align:center; }
.winner-team-name {
  font-size:clamp(1.1rem,3.5vw,2.3rem); font-weight:700; color:#fff; text-align:center;
  padding:clamp(9px,1.8vh,16px) clamp(24px,4.5vw,46px); border-radius:14px;
}
.winner-team-name.blue { background:linear-gradient(135deg,var(--blue-d),var(--blue)); box-shadow:0 0 50px rgba(26,79,196,0.5); }
.winner-team-name.red  { background:linear-gradient(135deg,var(--red),var(--red-d));   box-shadow:0 0 50px rgba(196,26,26,0.5); }
.winner-team-name.draw { background:linear-gradient(135deg,#444,#777); }

.final-score-row { display:flex; gap:clamp(14px,2.5vw,28px); align-items:center; }
.final-box { display:flex; flex-direction:column; align-items:center; gap:4px; padding:clamp(9px,1.8vh,16px) clamp(18px,3.5vw,32px); border-radius:13px; }
.final-box.blue { background:rgba(26,79,196,0.22); border:2px solid var(--blue); }
.final-box.red  { background:rgba(196,26,26,0.22); border:2px solid var(--red); }
.final-num { font-size:clamp(1.7rem,4.5vw,2.8rem); font-weight:900; }
.final-lbl { font-size:clamp(0.58rem,1.3vw,0.78rem); color:var(--subtext); text-transform:uppercase; letter-spacing:2px; }
.vs-sep { font-size:clamp(0.9rem,2.2vw,1.4rem); color:var(--subtext); font-weight:700; }

.play-again-btn {
  padding:clamp(11px,2vh,15px) clamp(32px,5.5vw,52px);
  background:linear-gradient(135deg,var(--gold),#FF9800);
  color:#000; font-size:clamp(0.88rem,1.9vw,1.15rem);
  font-weight:700; font-family:inherit; border:none; border-radius:50px;
  cursor:pointer; transition:all 0.3s; text-transform:uppercase;
  letter-spacing:2px; box-shadow:0 6px 26px rgba(255,214,0,0.3);
}
.play-again-btn:hover { transform:translateY(-3px); box-shadow:0 12px 38px rgba(255,214,0,0.5); }

/* CONFETTI */
#confetti { position:fixed; inset:0; pointer-events:none; z-index:300; overflow:hidden; }
.conf { position:absolute; top:-22px; animation:confFall linear forwards; border-radius:2px; }
@keyframes confFall { 0%{transform:translateY(0) rotate(0deg);opacity:1} 100%{transform:translateY(112vh) rotate(550deg);opacity:0} }

/* =============================================
   MOBILE PORTRAIT
============================================= */
@media (max-width:640px) and (orientation:portrait) {
  .game-main { flex-direction:column; }
  .team-panel { width:100%; flex-direction:row; flex-wrap:wrap; gap:5px; padding:7px 9px; }
  .team-panel.blue { border-right:none; border-bottom:1px solid rgba(91,155,213,0.18); }
  .team-panel.red  { border-left:none;  border-top:1px solid rgba(224,82,82,0.18); }
  .panel-header { width:100%; }
  .question-box { flex:1; min-width:110px; }
  .keypad { flex:1.4; min-width:170px; }
  .arena { min-height:140px; }
  .rope-stage { height:clamp(90px,20vw,160px); }
  .player-fig { width:clamp(26px,6vw,48px); height:clamp(56px,12vw,100px); }
}

/* Mobile landscape narrow panels */
@media (max-width:900px) and (orientation:landscape) {
  .team-panel { width:clamp(155px,19vw,235px); }
}
</style>
</head>
<body>

<!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê START SCREEN ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
<div class="screen active" id="start-screen">
  <div class="game-title">‚öîÔ∏è Tug of War<br><span class="accent">Mathematics</span></div>
  <div class="game-subtitle">Team vs Team ¬∑ Math Battle</div>
  <div class="diff-section">
    <div class="diff-label">Difficulty</div>
    <div class="diff-row">
      <button class="diff-btn active" data-diff="easy">Easy</button>
      <button class="diff-btn" data-diff="medium">Medium</button>
      <button class="diff-btn" data-diff="hard">Hard</button>
    </div>
  </div>
  <button class="start-btn" id="startBtn">üéÆ Start Game</button>
</div>

<!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê GAME SCREEN ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
<div class="screen" id="game-screen">

  <div class="top-bar">
    <div class="score-pill blue">
      <div>
        <div class="score-pill-label">Team 1</div>
        <div class="score-pill-num" id="t1Score">0</div>
      </div>
    </div>
    <div class="top-center">
      <div class="top-timer-label">Time</div>
      <div class="top-timer" id="timerEl">10</div>
    </div>
    <div class="score-pill red">
      <div>
        <div class="score-pill-label">Team 2</div>
        <div class="score-pill-num" id="t2Score">0</div>
      </div>
    </div>
  </div>

  <div class="progress-strip">
    <div class="prog-track blue"><div class="prog-fill" id="t1Prog"></div></div>
    <div class="prog-track red"><div class="prog-fill" id="t2Prog"></div></div>
  </div>

  <div class="game-main">

    <!-- TEAM 1 PANEL -->
    <div class="team-panel blue" id="t1Panel">
      <div class="panel-header">
        <div class="team-name" style="color:var(--blue-l)">Team 1</div>
        <div class="q-badge" id="t1Badge">1 / 10</div>
      </div>
      <div class="question-box">
        <div class="question-text" id="t1Q">? + ? = ?</div>
        <input class="answer-input" id="t1In" type="number" placeholder="?" readonly>
      </div>
      <div class="keypad" id="t1Pad"></div>
    </div>

    <!-- CENTER ARENA -->
    <div class="arena">
      <div class="ground"></div>
      <div class="cloud" style="width:75px;height:20px;top:7%;animation-duration:27s;animation-delay:-4s"></div>
      <div class="cloud" style="width:52px;height:14px;top:17%;animation-duration:34s;animation-delay:-13s"></div>
      <div class="cloud" style="width:95px;height:24px;top:4%;animation-duration:21s;animation-delay:-7s"></div>

      <div class="arena-score-row">
        <div class="arena-pill blue" id="aT1">0</div>
        <div class="arena-pill red"  id="aT2">0</div>
      </div>

      <div class="rope-stage" id="ropeStage">
        <div class="win-zone left">‚Üê Team 1 Wins</div>
        <div class="win-zone right">Team 2 Wins ‚Üí</div>
        <div class="center-flag">
          <div class="flag-icon">üö©</div>
          <div class="flag-pole"></div>
        </div>

        <div class="movers" id="movers">
          <div class="rope"></div>

          <!-- ‚ïê‚ïê‚ïê‚ïê BLUE TEAM (left side) ‚ïê‚ïê‚ïê‚ïê -->
          <div class="team-group left">

            <!-- Blue Player 1 ‚Äî detailed realistic SVG -->
            <div class="player-fig">
<svg viewBox="0 0 58 128" xmlns="http://www.w3.org/2000/svg" fill="none">
  <!-- Shadow -->
  <ellipse cx="29" cy="124" rx="15" ry="4" fill="rgba(0,0,0,0.28)"/>
  <!-- BOOTS -->
  <rect x="9" y="109" width="15" height="11" rx="3" fill="#1a1206"/>
  <rect x="9" y="116" width="19" height="4" rx="2" fill="#110e04"/>
  <rect x="29" y="109" width="15" height="11" rx="3" fill="#1a1206"/>
  <rect x="29" y="116" width="19" height="4" rx="2" fill="#110e04"/>
  <!-- Shoe laces -->
  <line x1="12" y1="111" x2="22" y2="111" stroke="rgba(255,255,255,0.4)" stroke-width="1"/>
  <line x1="32" y1="111" x2="42" y2="111" stroke="rgba(255,255,255,0.4)" stroke-width="1"/>
  <!-- LEGS (trousers) -->
  <rect x="11" y="80" width="13" height="33" rx="5" fill="#1a3a6b"/>
  <rect x="31" y="80" width="13" height="33" rx="5" fill="#152e55"/>
  <!-- Trouser crease highlight -->
  <line x1="17" y1="83" x2="17" y2="110" stroke="rgba(255,255,255,0.1)" stroke-width="1"/>
  <line x1="37" y1="83" x2="37" y2="110" stroke="rgba(255,255,255,0.08)" stroke-width="1"/>
  <!-- BELT -->
  <rect x="9" y="79" width="38" height="5" rx="2" fill="#0d1f3a"/>
  <rect x="25" y="80" width="8" height="4" rx="1" fill="#c8a900"/>
  <!-- TORSO / SHIRT -->
  <rect x="9" y="47" width="38" height="36" rx="7" fill="#1A4FC4"/>
  <!-- Shirt details: collar area -->
  <path d="M20 47 Q29 54 38 47" fill="#1660e0" opacity="0.4"/>
  <!-- Chest stripes -->
  <rect x="9" y="56" width="38" height="4" rx="1" fill="#5B9BD5" opacity="0.7"/>
  <rect x="9" y="68" width="38" height="3" rx="1" fill="#0B2D8C" opacity="0.8"/>
  <!-- Shirt muscle contour shading -->
  <ellipse cx="22" cy="60" rx="6" ry="8" fill="rgba(255,255,255,0.04)"/>
  <ellipse cx="36" cy="60" rx="6" ry="8" fill="rgba(255,255,255,0.04)"/>
  <!-- LEFT ARM ‚Äî extended back gripping rope -->
  <path d="M9 55 Q-1 59 -7 64" stroke="#1A4FC4" stroke-width="8" stroke-linecap="round"/>
  <path d="M9 55 Q-1 59 -7 64" stroke="#FFCC99" stroke-width="5.5" stroke-linecap="round"/>
  <!-- Fist gripping rope -->
  <ellipse cx="-7" cy="65" rx="6" ry="5" fill="#FFCC99"/>
  <ellipse cx="-7" cy="65" rx="6" ry="5" fill="rgba(0,0,0,0.1)"/>
  <line x1="-11" y1="64" x2="-3" y2="64" stroke="rgba(180,100,60,0.5)" stroke-width="1"/>
  <!-- RIGHT ARM ‚Äî bent, supporting -->
  <path d="M47 53 Q55 57 53 68" stroke="#1A4FC4" stroke-width="8" stroke-linecap="round"/>
  <path d="M47 53 Q55 57 53 68" stroke="#FFCC99" stroke-width="5.5" stroke-linecap="round"/>
  <ellipse cx="53" cy="69" rx="5" ry="4.5" fill="#FFCC99"/>
  <!-- NECK -->
  <rect x="23" y="38" width="12" height="12" rx="4" fill="#FFCC99"/>
  <!-- Neck muscle -->
  <line x1="26" y1="39" x2="26" y2="49" stroke="rgba(180,100,60,0.3)" stroke-width="1.5"/>
  <line x1="32" y1="39" x2="32" y2="49" stroke="rgba(180,100,60,0.3)" stroke-width="1.5"/>
  <!-- HEAD -->
  <ellipse cx="29" cy="27" rx="16" ry="17" fill="#FFCC99"/>
  <!-- Jaw definition -->
  <path d="M15 30 Q17 38 29 40 Q41 38 43 30" fill="#F5B07A" opacity="0.4"/>
  <!-- HAIR -->
  <ellipse cx="29" cy="12" rx="16" ry="8" fill="#3D2007"/>
  <rect x="13" y="12" width="32" height="9" rx="3" fill="#3D2007"/>
  <!-- Hair texture lines -->
  <path d="M15 14 Q22 11 29 13" stroke="rgba(90,50,15,0.5)" stroke-width="1" fill="none"/>
  <path d="M29 13 Q36 11 43 14" stroke="rgba(90,50,15,0.5)" stroke-width="1" fill="none"/>
  <!-- HEADBAND (team color) -->
  <rect x="13" y="19" width="32" height="7" rx="3.5" fill="#0B2D8C"/>
  <rect x="13" y="19" width="32" height="3" rx="2" fill="#1A4FC4"/>
  <rect x="13" y="19" width="32" height="1.5" rx="1" fill="rgba(255,255,255,0.15)"/>
  <!-- EARS -->
  <ellipse cx="13" cy="29" rx="4" ry="5.5" fill="#F5B07A"/>
  <ellipse cx="13" cy="29" rx="2.5" ry="3.5" fill="#e8996a"/>
  <ellipse cx="45" cy="29" rx="4" ry="5.5" fill="#F5B07A"/>
  <ellipse cx="45" cy="29" rx="2.5" ry="3.5" fill="#e8996a"/>
  <!-- EYES -->
  <ellipse cx="21" cy="28" rx="4.5" ry="5" fill="white"/>
  <ellipse cx="37" cy="28" rx="4.5" ry="5" fill="white"/>
  <!-- Iris -->
  <circle cx="22" cy="29" r="3" fill="#2c6b8a"/>
  <circle cx="38" cy="29" r="3" fill="#2c6b8a"/>
  <!-- Pupil -->
  <circle cx="22" cy="29.5" r="1.8" fill="#0d1a0d"/>
  <circle cx="38" cy="29.5" r="1.8" fill="#0d1a0d"/>
  <!-- Eye shine -->
  <circle cx="23.2" cy="28" r="0.9" fill="white"/>
  <circle cx="39.2" cy="28" r="0.9" fill="white"/>
  <!-- Eye lid / shadow -->
  <path d="M17 25 Q21 23 25 25" fill="rgba(180,100,50,0.25)"/>
  <path d="M33 25 Q37 23 41 25" fill="rgba(180,100,50,0.25)"/>
  <!-- EYEBROWS (effort / determination) -->
  <path d="M17 22 Q21 19 25 22" stroke="#3D2007" stroke-width="2.2" stroke-linecap="round" fill="none"/>
  <path d="M33 22 Q37 19 41 22" stroke="#3D2007" stroke-width="2.2" stroke-linecap="round" fill="none"/>
  <!-- NOSE -->
  <path d="M27 31 Q29 35 31 31" stroke="#C88C5A" stroke-width="1.5" fill="none" stroke-linecap="round"/>
  <ellipse cx="25" cy="33" rx="2" ry="1.2" fill="rgba(180,100,50,0.2)"/>
  <ellipse cx="33" cy="33" rx="2" ry="1.2" fill="rgba(180,100,50,0.2)"/>
  <!-- MOUTH ‚Äî gritting teeth, effort -->
  <path d="M20 37 Q29 41.5 38 37" stroke="#8B2222" stroke-width="1.5" fill="rgba(80,10,10,0.6)" stroke-linecap="round"/>
  <rect x="22" y="37" width="14" height="3.5" rx="1" fill="white"/>
  <line x1="26" y1="37" x2="26" y2="40.5" stroke="rgba(180,100,50,0.4)" stroke-width="0.7"/>
  <line x1="30" y1="37" x2="30" y2="40.5" stroke="rgba(180,100,50,0.4)" stroke-width="0.7"/>
  <line x1="34" y1="37" x2="34" y2="40.5" stroke="rgba(180,100,50,0.4)" stroke-width="0.7"/>
  <!-- Effort wrinkles on forehead -->
  <path d="M19 21 Q21 19.5 23 21" stroke="rgba(150,80,30,0.35)" stroke-width="0.8" fill="none"/>
  <path d="M35 21 Q37 19.5 39 21" stroke="rgba(150,80,30,0.35)" stroke-width="0.8" fill="none"/>
  <!-- Sweat drops -->
  <ellipse cx="7" cy="20" rx="2" ry="3" fill="rgba(91,155,213,0.65)"/>
  <ellipse cx="51" cy="16" rx="1.5" ry="2.3" fill="rgba(91,155,213,0.55)"/>
</svg>
            </div>

            <!-- Blue Player 2 -->
            <div class="player-fig">
<svg viewBox="0 0 58 128" xmlns="http://www.w3.org/2000/svg" fill="none">
  <ellipse cx="29" cy="124" rx="15" ry="4" fill="rgba(0,0,0,0.28)"/>
  <rect x="9" y="109" width="15" height="11" rx="3" fill="#1a1206"/>
  <rect x="9" y="116" width="19" height="4" rx="2" fill="#110e04"/>
  <rect x="29" y="109" width="15" height="11" rx="3" fill="#1a1206"/>
  <rect x="29" y="116" width="19" height="4" rx="2" fill="#110e04"/>
  <line x1="12" y1="111" x2="22" y2="111" stroke="rgba(255,255,255,0.4)" stroke-width="1"/>
  <line x1="32" y1="111" x2="42" y2="111" stroke="rgba(255,255,255,0.4)" stroke-width="1"/>
  <rect x="11" y="80" width="13" height="33" rx="5" fill="#1a3a6b"/>
  <rect x="31" y="80" width="13" height="33" rx="5" fill="#152e55"/>
  <rect x="9" y="79" width="38" height="5" rx="2" fill="#0d1f3a"/>
  <rect x="25" y="80" width="8" height="4" rx="1" fill="#c8a900"/>
  <rect x="9" y="47" width="38" height="36" rx="7" fill="#1A4FC4"/>
  <path d="M20 47 Q29 54 38 47" fill="#1660e0" opacity="0.4"/>
  <!-- Number on shirt -->
  <text x="29" y="67" text-anchor="middle" fill="rgba(255,255,255,0.9)" font-size="14" font-family="Georgia" font-weight="bold">1</text>
  <rect x="9" y="62" width="38" height="3" rx="1" fill="#0B2D8C" opacity="0.7"/>
  <path d="M9 53 Q-2 57 -6 63" stroke="#1A4FC4" stroke-width="8" stroke-linecap="round"/>
  <path d="M9 53 Q-2 57 -6 63" stroke="#e8a870" stroke-width="5.5" stroke-linecap="round"/>
  <ellipse cx="-6" cy="64" rx="6" ry="5" fill="#e8a870"/>
  <line x1="-10" y1="63" x2="-2" y2="63" stroke="rgba(150,80,40,0.5)" stroke-width="1"/>
  <path d="M47 53 Q55 59 52 70" stroke="#1A4FC4" stroke-width="8" stroke-linecap="round"/>
  <path d="M47 53 Q55 59 52 70" stroke="#e8a870" stroke-width="5.5" stroke-linecap="round"/>
  <ellipse cx="52" cy="71" rx="5" ry="4.5" fill="#e8a870"/>
  <rect x="23" y="38" width="12" height="12" rx="4" fill="#e8a870"/>
  <line x1="26" y1="39" x2="26" y2="49" stroke="rgba(160,90,40,0.3)" stroke-width="1.5"/>
  <line x1="32" y1="39" x2="32" y2="49" stroke="rgba(160,90,40,0.3)" stroke-width="1.5"/>
  <!-- Darker skin tone -->
  <ellipse cx="29" cy="27" rx="16" ry="17" fill="#C8865A"/>
  <path d="M15 30 Q17 38 29 40 Q41 38 43 30" fill="#a0653a" opacity="0.35"/>
  <ellipse cx="29" cy="12" rx="16" ry="8" fill="#0d0604"/>
  <rect x="13" y="12" width="32" height="9" rx="3" fill="#0d0604"/>
  <rect x="13" y="19" width="32" height="7" rx="3.5" fill="#0B2D8C"/>
  <rect x="13" y="19" width="32" height="3" rx="2" fill="#1A4FC4"/>
  <ellipse cx="13" cy="29" rx="4" ry="5.5" fill="#b06c3a"/>
  <ellipse cx="13" cy="29" rx="2.5" ry="3.5" fill="#8a5228"/>
  <ellipse cx="45" cy="29" rx="4" ry="5.5" fill="#b06c3a"/>
  <ellipse cx="45" cy="29" rx="2.5" ry="3.5" fill="#8a5228"/>
  <ellipse cx="21" cy="28" rx="4.5" ry="5" fill="white"/>
  <ellipse cx="37" cy="28" rx="4.5" ry="5" fill="white"/>
  <circle cx="22" cy="29" r="3" fill="#3d2200"/>
  <circle cx="38" cy="29" r="3" fill="#3d2200"/>
  <circle cx="22" cy="29.5" r="1.8" fill="#0d0500"/>
  <circle cx="38" cy="29.5" r="1.8" fill="#0d0500"/>
  <circle cx="23.2" cy="28" r="0.9" fill="white"/>
  <circle cx="39.2" cy="28" r="0.9" fill="white"/>
  <path d="M17 22 Q21 19 25 22" stroke="#0d0604" stroke-width="2.5" stroke-linecap="round" fill="none"/>
  <path d="M33 22 Q37 19 41 22" stroke="#0d0604" stroke-width="2.5" stroke-linecap="round" fill="none"/>
  <path d="M27 31 Q29 35 31 31" stroke="#8a5228" stroke-width="1.5" fill="none" stroke-linecap="round"/>
  <path d="M20 37 Q29 41.5 38 37" stroke="#6b1515" stroke-width="1.5" fill="rgba(60,10,10,0.6)" stroke-linecap="round"/>
  <rect x="22" y="37" width="14" height="3.5" rx="1" fill="rgba(240,230,220,0.95)"/>
  <line x1="26" y1="37" x2="26" y2="40.5" stroke="rgba(120,70,30,0.4)" stroke-width="0.7"/>
  <line x1="30" y1="37" x2="30" y2="40.5" stroke="rgba(120,70,30,0.4)" stroke-width="0.7"/>
  <line x1="34" y1="37" x2="34" y2="40.5" stroke="rgba(120,70,30,0.4)" stroke-width="0.7"/>
  <ellipse cx="8" cy="19" rx="2" ry="3" fill="rgba(91,155,213,0.6)"/>
</svg>
            </div>

            <!-- Blue Player 3 -->
            <div class="player-fig">
<svg viewBox="0 0 58 128" xmlns="http://www.w3.org/2000/svg" fill="none">
  <ellipse cx="29" cy="124" rx="15" ry="4" fill="rgba(0,0,0,0.28)"/>
  <rect x="9" y="109" width="15" height="11" rx="3" fill="#1a1206"/>
  <rect x="9" y="116" width="19" height="4" rx="2" fill="#110e04"/>
  <rect x="29" y="109" width="15" height="11" rx="3" fill="#1a1206"/>
  <rect x="29" y="116" width="19" height="4" rx="2" fill="#110e04"/>
  <rect x="11" y="80" width="13" height="33" rx="5" fill="#1a3a6b"/>
  <rect x="31" y="80" width="13" height="33" rx="5" fill="#152e55"/>
  <rect x="9" y="79" width="38" height="5" rx="2" fill="#0d1f3a"/>
  <rect x="25" y="80" width="8" height="4" rx="1" fill="#c8a900"/>
  <rect x="9" y="47" width="38" height="36" rx="7" fill="#1A4FC4"/>
  <rect x="9" y="53" width="38" height="4" rx="1" fill="#0B2D8C" opacity="0.8"/>
  <rect x="9" y="68" width="38" height="4" rx="1" fill="#5B9BD5" opacity="0.7"/>
  <path d="M9 57 Q-2 61 -8 66" stroke="#1A4FC4" stroke-width="8" stroke-linecap="round"/>
  <path d="M9 57 Q-2 61 -8 66" stroke="#d4aa80" stroke-width="5.5" stroke-linecap="round"/>
  <ellipse cx="-8" cy="67" rx="6" ry="5" fill="#d4aa80"/>
  <path d="M47 55 Q55 60 52 71" stroke="#1A4FC4" stroke-width="8" stroke-linecap="round"/>
  <path d="M47 55 Q55 60 52 71" stroke="#d4aa80" stroke-width="5.5" stroke-linecap="round"/>
  <ellipse cx="52" cy="72" rx="5" ry="4.5" fill="#d4aa80"/>
  <rect x="23" y="38" width="12" height="12" rx="4" fill="#d4aa80"/>
  <!-- Slightly different/older face -->
  <ellipse cx="29" cy="27" rx="16" ry="17" fill="#d4aa80"/>
  <path d="M15 30 Q17 38 29 40 Q41 38 43 30" fill="#b07840" opacity="0.3"/>
  <!-- Black hair -->
  <ellipse cx="29" cy="12" rx="16" ry="8" fill="#1a0c00"/>
  <rect x="13" y="12" width="32" height="9" rx="3" fill="#1a0c00"/>
  <!-- Slightly longer hair -->
  <path d="M13 18 Q10 26 12 32" fill="#1a0c00"/>
  <path d="M45 18 Q48 26 46 32" fill="#1a0c00"/>
  <rect x="13" y="19" width="32" height="7" rx="3.5" fill="#0B2D8C"/>
  <rect x="13" y="19" width="32" height="3" rx="2" fill="#1A4FC4"/>
  <ellipse cx="13" cy="29" rx="4" ry="5.5" fill="#c09060"/>
  <ellipse cx="45" cy="29" rx="4" ry="5.5" fill="#c09060"/>
  <ellipse cx="21" cy="28" rx="4.5" ry="5" fill="white"/>
  <ellipse cx="37" cy="28" rx="4.5" ry="5" fill="white"/>
  <circle cx="22" cy="29" r="3" fill="#1a1200"/>
  <circle cx="38" cy="29" r="3" fill="#1a1200"/>
  <circle cx="22" cy="29.5" r="1.8" fill="#050400"/>
  <circle cx="38" cy="29.5" r="1.8" fill="#050400"/>
  <circle cx="23.2" cy="28" r="0.9" fill="white"/>
  <circle cx="39.2" cy="28" r="0.9" fill="white"/>
  <path d="M17 22 Q21 19.5 25 22" stroke="#1a0c00" stroke-width="2" stroke-linecap="round" fill="none"/>
  <path d="M33 22 Q37 19.5 41 22" stroke="#1a0c00" stroke-width="2" stroke-linecap="round" fill="none"/>
  <path d="M27 32 Q29 36 31 32" stroke="#9a7040" stroke-width="1.5" fill="none" stroke-linecap="round"/>
  <path d="M20 37 Q29 42 38 37" stroke="#7a1515" stroke-width="1.5" fill="rgba(50,8,8,0.6)" stroke-linecap="round"/>
  <rect x="22" y="37" width="14" height="3.5" rx="1" fill="rgba(245,235,220,0.95)"/>
  <line x1="26" y1="37" x2="26" y2="40.5" stroke="rgba(140,90,40,0.35)" stroke-width="0.7"/>
  <line x1="30" y1="37" x2="30" y2="40.5" stroke="rgba(140,90,40,0.35)" stroke-width="0.7"/>
  <line x1="34" y1="37" x2="34" y2="40.5" stroke="rgba(140,90,40,0.35)" stroke-width="0.7"/>
  <!-- Age line on forehead -->
  <path d="M20 22 Q25 21 30 22" stroke="rgba(150,90,30,0.25)" stroke-width="0.8" fill="none"/>
  <ellipse cx="51" cy="17" rx="1.8" ry="2.5" fill="rgba(91,155,213,0.6)"/>
</svg>
            </div>

          </div><!-- end blue team -->

          <!-- ‚ïê‚ïê‚ïê‚ïê RED TEAM (right side, mirrored) ‚ïê‚ïê‚ïê‚ïê -->
          <div class="team-group right">

            <!-- Red Player 1 (mirrored version) -->
            <div class="player-fig">
<svg viewBox="0 0 58 128" xmlns="http://www.w3.org/2000/svg" fill="none">
  <ellipse cx="29" cy="124" rx="15" ry="4" fill="rgba(0,0,0,0.28)"/>
  <rect x="9" y="109" width="15" height="11" rx="3" fill="#1a1206"/>
  <rect x="9" y="116" width="19" height="4" rx="2" fill="#110e04"/>
  <rect x="29" y="109" width="15" height="11" rx="3" fill="#1a1206"/>
  <rect x="29" y="116" width="19" height="4" rx="2" fill="#110e04"/>
  <line x1="12" y1="111" x2="22" y2="111" stroke="rgba(255,255,255,0.4)" stroke-width="1"/>
  <line x1="32" y1="111" x2="42" y2="111" stroke="rgba(255,255,255,0.4)" stroke-width="1"/>
  <rect x="11" y="80" width="13" height="33" rx="5" fill="#6b1a1a"/>
  <rect x="31" y="80" width="13" height="33" rx="5" fill="#501010"/>
  <line x1="17" y1="83" x2="17" y2="110" stroke="rgba(255,255,255,0.08)" stroke-width="1"/>
  <rect x="9" y="79" width="38" height="5" rx="2" fill="#280808"/>
  <rect x="25" y="80" width="8" height="4" rx="1" fill="#c8a900"/>
  <!-- RED SHIRT -->
  <rect x="9" y="47" width="38" height="36" rx="7" fill="#C41A1A"/>
  <path d="M20 47 Q29 54 38 47" fill="#e03030" opacity="0.35"/>
  <rect x="9" y="56" width="38" height="4" rx="1" fill="#E05252" opacity="0.7"/>
  <rect x="9" y="68" width="38" height="3" rx="1" fill="#8C0B0B" opacity="0.8"/>
  <!-- RIGHT ARM extended to grip rope (arm on right) -->
  <path d="M49 55 Q59 59 65 64" stroke="#C41A1A" stroke-width="8" stroke-linecap="round"/>
  <path d="M49 55 Q59 59 65 64" stroke="#FFCC99" stroke-width="5.5" stroke-linecap="round"/>
  <ellipse cx="65" cy="65" rx="6" ry="5" fill="#FFCC99"/>
  <line x1="61" y1="64" x2="69" y2="64" stroke="rgba(180,100,60,0.5)" stroke-width="1"/>
  <!-- LEFT ARM bent behind -->
  <path d="M9 53 Q1 57 3 68" stroke="#C41A1A" stroke-width="8" stroke-linecap="round"/>
  <path d="M9 53 Q1 57 3 68" stroke="#FFCC99" stroke-width="5.5" stroke-linecap="round"/>
  <ellipse cx="3" cy="69" rx="5" ry="4.5" fill="#FFCC99"/>
  <rect x="23" y="38" width="12" height="12" rx="4" fill="#FFCC99"/>
  <line x1="26" y1="39" x2="26" y2="49" stroke="rgba(180,100,60,0.3)" stroke-width="1.5"/>
  <line x1="32" y1="39" x2="32" y2="49" stroke="rgba(180,100,60,0.3)" stroke-width="1.5"/>
  <ellipse cx="29" cy="27" rx="16" ry="17" fill="#FFCC99"/>
  <path d="M15 30 Q17 38 29 40 Q41 38 43 30" fill="#F5B07A" opacity="0.4"/>
  <ellipse cx="29" cy="12" rx="16" ry="8" fill="#3D2007"/>
  <rect x="13" y="12" width="32" height="9" rx="3" fill="#3D2007"/>
  <!-- RED HEADBAND -->
  <rect x="13" y="19" width="32" height="7" rx="3.5" fill="#8C0B0B"/>
  <rect x="13" y="19" width="32" height="3" rx="2" fill="#C41A1A"/>
  <rect x="13" y="19" width="32" height="1.5" rx="1" fill="rgba(255,255,255,0.15)"/>
  <ellipse cx="13" cy="29" rx="4" ry="5.5" fill="#F5B07A"/>
  <ellipse cx="13" cy="29" rx="2.5" ry="3.5" fill="#e8996a"/>
  <ellipse cx="45" cy="29" rx="4" ry="5.5" fill="#F5B07A"/>
  <ellipse cx="45" cy="29" rx="2.5" ry="3.5" fill="#e8996a"/>
  <ellipse cx="21" cy="28" rx="4.5" ry="5" fill="white"/>
  <ellipse cx="37" cy="28" rx="4.5" ry="5" fill="white"/>
  <circle cx="22" cy="29" r="3" fill="#2c6b3a"/>
  <circle cx="38" cy="29" r="3" fill="#2c6b3a"/>
  <circle cx="22" cy="29.5" r="1.8" fill="#0a1a0a"/>
  <circle cx="38" cy="29.5" r="1.8" fill="#0a1a0a"/>
  <circle cx="23.2" cy="28" r="0.9" fill="white"/>
  <circle cx="39.2" cy="28" r="0.9" fill="white"/>
  <path d="M17 22 Q21 19 25 22" stroke="#3D2007" stroke-width="2.2" stroke-linecap="round" fill="none"/>
  <path d="M33 22 Q37 19 41 22" stroke="#3D2007" stroke-width="2.2" stroke-linecap="round" fill="none"/>
  <path d="M27 31 Q29 35 31 31" stroke="#C88C5A" stroke-width="1.5" fill="none" stroke-linecap="round"/>
  <path d="M20 37 Q29 41.5 38 37" stroke="#6b1515" stroke-width="1.5" fill="rgba(80,10,10,0.6)" stroke-linecap="round"/>
  <rect x="22" y="37" width="14" height="3.5" rx="1" fill="white"/>
  <line x1="26" y1="37" x2="26" y2="40.5" stroke="rgba(180,100,50,0.4)" stroke-width="0.7"/>
  <line x1="30" y1="37" x2="30" y2="40.5" stroke="rgba(180,100,50,0.4)" stroke-width="0.7"/>
  <line x1="34" y1="37" x2="34" y2="40.5" stroke="rgba(180,100,50,0.4)" stroke-width="0.7"/>
  <path d="M19 21 Q21 19.5 23 21" stroke="rgba(150,80,30,0.35)" stroke-width="0.8" fill="none"/>
  <path d="M35 21 Q37 19.5 39 21" stroke="rgba(150,80,30,0.35)" stroke-width="0.8" fill="none"/>
  <!-- Red team sweat -->
  <ellipse cx="50" cy="20" rx="2" ry="3" fill="rgba(224,82,82,0.65)"/>
  <ellipse cx="7" cy="16" rx="1.5" ry="2.3" fill="rgba(224,82,82,0.55)"/>
</svg>
            </div>

            <!-- Red Player 2 -->
            <div class="player-fig">
<svg viewBox="0 0 58 128" xmlns="http://www.w3.org/2000/svg" fill="none">
  <ellipse cx="29" cy="124" rx="15" ry="4" fill="rgba(0,0,0,0.28)"/>
  <rect x="9" y="109" width="15" height="11" rx="3" fill="#1a1206"/>
  <rect x="9" y="116" width="19" height="4" rx="2" fill="#110e04"/>
  <rect x="29" y="109" width="15" height="11" rx="3" fill="#1a1206"/>
  <rect x="29" y="116" width="19" height="4" rx="2" fill="#110e04"/>
  <rect x="11" y="80" width="13" height="33" rx="5" fill="#6b1a1a"/>
  <rect x="31" y="80" width="13" height="33" rx="5" fill="#501010"/>
  <rect x="9" y="79" width="38" height="5" rx="2" fill="#280808"/>
  <rect x="25" y="80" width="8" height="4" rx="1" fill="#c8a900"/>
  <rect x="9" y="47" width="38" height="36" rx="7" fill="#C41A1A"/>
  <path d="M20 47 Q29 54 38 47" fill="#e03030" opacity="0.35"/>
  <text x="29" y="67" text-anchor="middle" fill="rgba(255,255,255,0.9)" font-size="14" font-family="Georgia" font-weight="bold">2</text>
  <rect x="9" y="62" width="38" height="3" rx="1" fill="#8C0B0B" opacity="0.7"/>
  <path d="M49 53 Q59 57 64 63" stroke="#C41A1A" stroke-width="8" stroke-linecap="round"/>
  <path d="M49 53 Q59 57 64 63" stroke="#e8a870" stroke-width="5.5" stroke-linecap="round"/>
  <ellipse cx="64" cy="64" rx="6" ry="5" fill="#e8a870"/>
  <path d="M9 55 Q1 59 3 70" stroke="#C41A1A" stroke-width="8" stroke-linecap="round"/>
  <path d="M9 55 Q1 59 3 70" stroke="#e8a870" stroke-width="5.5" stroke-linecap="round"/>
  <ellipse cx="3" cy="71" rx="5" ry="4.5" fill="#e8a870"/>
  <rect x="23" y="38" width="12" height="12" rx="4" fill="#e8a870"/>
  <!-- Darker skin red player -->
  <ellipse cx="29" cy="27" rx="16" ry="17" fill="#C8865A"/>
  <path d="M15 30 Q17 38 29 40 Q41 38 43 30" fill="#a0653a" opacity="0.35"/>
  <ellipse cx="29" cy="12" rx="16" ry="8" fill="#0d0604"/>
  <rect x="13" y="12" width="32" height="9" rx="3" fill="#0d0604"/>
  <rect x="13" y="19" width="32" height="7" rx="3.5" fill="#8C0B0B"/>
  <rect x="13" y="19" width="32" height="3" rx="2" fill="#C41A1A"/>
  <ellipse cx="13" cy="29" rx="4" ry="5.5" fill="#b06c3a"/>
  <ellipse cx="45" cy="29" rx="4" ry="5.5" fill="#b06c3a"/>
  <ellipse cx="21" cy="28" rx="4.5" ry="5" fill="white"/>
  <ellipse cx="37" cy="28" rx="4.5" ry="5" fill="white"/>
  <circle cx="22" cy="29" r="3" fill="#3d1c00"/>
  <circle cx="38" cy="29" r="3" fill="#3d1c00"/>
  <circle cx="22" cy="29.5" r="1.8" fill="#100600"/>
  <circle cx="38" cy="29.5" r="1.8" fill="#100600"/>
  <circle cx="23.2" cy="28" r="0.9" fill="white"/>
  <circle cx="39.2" cy="28" r="0.9" fill="white"/>
  <path d="M17 22 Q21 19 25 22" stroke="#0d0604" stroke-width="2.5" stroke-linecap="round" fill="none"/>
  <path d="M33 22 Q37 19 41 22" stroke="#0d0604" stroke-width="2.5" stroke-linecap="round" fill="none"/>
  <path d="M27 31 Q29 35 31 31" stroke="#8a5228" stroke-width="1.5" fill="none" stroke-linecap="round"/>
  <path d="M20 37 Q29 41.5 38 37" stroke="#6b1515" stroke-width="1.5" fill="rgba(60,10,10,0.6)" stroke-linecap="round"/>
  <rect x="22" y="37" width="14" height="3.5" rx="1" fill="rgba(240,230,220,0.95)"/>
  <line x1="26" y1="37" x2="26" y2="40.5" stroke="rgba(120,70,30,0.4)" stroke-width="0.7"/>
  <line x1="30" y1="37" x2="30" y2="40.5" stroke="rgba(120,70,30,0.4)" stroke-width="0.7"/>
  <line x1="34" y1="37" x2="34" y2="40.5" stroke="rgba(120,70,30,0.4)" stroke-width="0.7"/>
  <ellipse cx="50" cy="19" rx="2" ry="3" fill="rgba(224,82,82,0.6)"/>
</svg>
            </div>

            <!-- Red Player 3 -->
            <div class="player-fig">
<svg viewBox="0 0 58 128" xmlns="http://www.w3.org/2000/svg" fill="none">
  <ellipse cx="29" cy="124" rx="15" ry="4" fill="rgba(0,0,0,0.28)"/>
  <rect x="9" y="109" width="15" height="11" rx="3" fill="#1a1206"/>
  <rect x="9" y="116" width="19" height="4" rx="2" fill="#110e04"/>
  <rect x="29" y="109" width="15" height="11" rx="3" fill="#1a1206"/>
  <rect x="29" y="116" width="19" height="4" rx="2" fill="#110e04"/>
  <rect x="11" y="80" width="13" height="33" rx="5" fill="#6b1a1a"/>
  <rect x="31" y="80" width="13" height="33" rx="5" fill="#501010"/>
  <rect x="9" y="79" width="38" height="5" rx="2" fill="#280808"/>
  <rect x="25" y="80" width="8" height="4" rx="1" fill="#c8a900"/>
  <rect x="9" y="47" width="38" height="36" rx="7" fill="#C41A1A"/>
  <rect x="9" y="53" width="38" height="4" rx="1" fill="#8C0B0B" opacity="0.8"/>
  <rect x="9" y="68" width="38" height="4" rx="1" fill="#E05252" opacity="0.7"/>
  <path d="M49 57 Q60 61 65 66" stroke="#C41A1A" stroke-width="8" stroke-linecap="round"/>
  <path d="M49 57 Q60 61 65 66" stroke="#d4aa80" stroke-width="5.5" stroke-linecap="round"/>
  <ellipse cx="65" cy="67" rx="6" ry="5" fill="#d4aa80"/>
  <path d="M9 55 Q1 58 3 70" stroke="#C41A1A" stroke-width="8" stroke-linecap="round"/>
  <path d="M9 55 Q1 58 3 70" stroke="#d4aa80" stroke-width="5.5" stroke-linecap="round"/>
  <ellipse cx="3" cy="71" rx="5" ry="4.5" fill="#d4aa80"/>
  <rect x="23" y="38" width="12" height="12" rx="4" fill="#d4aa80"/>
  <ellipse cx="29" cy="27" rx="16" ry="17" fill="#d4aa80"/>
  <path d="M15 30 Q17 38 29 40 Q41 38 43 30" fill="#b07840" opacity="0.3"/>
  <ellipse cx="29" cy="12" rx="16" ry="8" fill="#1a0c00"/>
  <rect x="13" y="12" width="32" height="9" rx="3" fill="#1a0c00"/>
  <path d="M13 18 Q10 26 12 32" fill="#1a0c00"/>
  <path d="M45 18 Q48 26 46 32" fill="#1a0c00"/>
  <rect x="13" y="19" width="32" height="7" rx="3.5" fill="#8C0B0B"/>
  <rect x="13" y="19" width="32" height="3" rx="2" fill="#C41A1A"/>
  <ellipse cx="13" cy="29" rx="4" ry="5.5" fill="#c09060"/>
  <ellipse cx="45" cy="29" rx="4" ry="5.5" fill="#c09060"/>
  <ellipse cx="21" cy="28" rx="4.5" ry="5" fill="white"/>
  <ellipse cx="37" cy="28" rx="4.5" ry="5" fill="white"/>
  <circle cx="22" cy="29" r="3" fill="#1a0800"/>
  <circle cx="38" cy="29" r="3" fill="#1a0800"/>
  <circle cx="22" cy="29.5" r="1.8" fill="#050200"/>
  <circle cx="38" cy="29.5" r="1.8" fill="#050200"/>
  <circle cx="23.2" cy="28" r="0.9" fill="white"/>
  <circle cx="39.2" cy="28" r="0.9" fill="white"/>
  <path d="M17 22 Q21 19.5 25 22" stroke="#1a0c00" stroke-width="2" stroke-linecap="round" fill="none"/>
  <path d="M33 22 Q37 19.5 41 22" stroke="#1a0c00" stroke-width="2" stroke-linecap="round" fill="none"/>
  <path d="M27 32 Q29 36 31 32" stroke="#9a7040" stroke-width="1.5" fill="none" stroke-linecap="round"/>
  <path d="M20 37 Q29 42 38 37" stroke="#6b1515" stroke-width="1.5" fill="rgba(50,8,8,0.6)" stroke-linecap="round"/>
  <rect x="22" y="37" width="14" height="3.5" rx="1" fill="rgba(245,235,220,0.95)"/>
  <line x1="26" y1="37" x2="26" y2="40.5" stroke="rgba(140,90,40,0.35)" stroke-width="0.7"/>
  <line x1="30" y1="37" x2="30" y2="40.5" stroke="rgba(140,90,40,0.35)" stroke-width="0.7"/>
  <line x1="34" y1="37" x2="34" y2="40.5" stroke="rgba(140,90,40,0.35)" stroke-width="0.7"/>
  <path d="M20 22 Q25 21 30 22" stroke="rgba(150,90,30,0.25)" stroke-width="0.8" fill="none"/>
  <ellipse cx="8" cy="17" rx="1.8" ry="2.5" fill="rgba(224,82,82,0.6)"/>
</svg>
            </div>

          </div><!-- end red team -->

        </div><!-- end movers -->
      </div><!-- end rope-stage -->
    </div><!-- end arena -->

    <!-- TEAM 2 PANEL -->
    <div class="team-panel red" id="t2Panel">
      <div class="panel-header">
        <div class="team-name" style="color:var(--red-l)">Team 2</div>
        <div class="q-badge" id="t2Badge">1 / 10</div>
      </div>
      <div class="question-box">
        <div class="question-text" id="t2Q">? + ? = ?</div>
        <input class="answer-input" id="t2In" type="number" placeholder="?" readonly>
      </div>
      <div class="keypad" id="t2Pad"></div>
    </div>

  </div>
</div><!-- end game-screen -->

<!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê WINNER SCREEN ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
<div class="screen" id="winner-screen">
  <div class="winner-crown">üëë</div>
  <div class="winner-title">WINNER!</div>
  <div class="winner-team-name" id="winnerBadge">Team 1</div>
  <div class="final-score-row">
    <div class="final-box blue"><div class="final-num" id="finalT1">0</div><div class="final-lbl">Team 1</div></div>
    <div class="vs-sep">VS</div>
    <div class="final-box red"><div class="final-num" id="finalT2">0</div><div class="final-lbl">Team 2</div></div>
  </div>
  <button class="play-again-btn" id="playAgainBtn">üîÑ Play Again</button>
</div>

<!-- FLASH OVERLAYS -->
<div class="flash-overlay t1" id="flashT1"></div>
<div class="flash-overlay t2" id="flashT2"></div>

<!-- CONFETTI -->
<div id="confetti"></div>

<script>
/* ============================================================
   TUG OF WAR MATHEMATICS ‚Äî Game Logic
   ============================================================ */

// ‚îÄ‚îÄ Audio ‚îÄ‚îÄ
let _ac=null;
function ac(){if(!_ac)_ac=new(window.AudioContext||window.webkitAudioContext)();return _ac;}
function tone(f,d,t='sine',v=0.28){
  try{const c=ac(),o=c.createOscillator(),g=c.createGain();
  o.connect(g);g.connect(c.destination);o.type=t;o.frequency.value=f;
  g.gain.setValueAtTime(v,c.currentTime);
  g.gain.exponentialRampToValueAtTime(0.001,c.currentTime+d);
  o.start();o.stop(c.currentTime+d);}catch(e){}
}
function sfxOk(){ tone(523,.08); setTimeout(()=>tone(659,.08),85); setTimeout(()=>tone(784,.18),170); }
function sfxNo(){ tone(165,.3,'sawtooth',.2); }
function sfxWin(){ [523,659,784,1047,1319].forEach((n,i)=>setTimeout(()=>tone(n,.22,'square',.16),i*120)); }

// ‚îÄ‚îÄ Difficulty ‚îÄ‚îÄ
const DIFFS={ easy:{m:9}, medium:{m:18}, hard:{m:35} };
let diff='easy';

// ‚îÄ‚îÄ Constants ‚îÄ‚îÄ
const TOTAL=10, QTIME=10, STEP=7;

// ‚îÄ‚îÄ State ‚îÄ‚îÄ
let G={};
function resetG(){
  G={t1:{qs:[],i:0,s:0,done:false},t2:{qs:[],i:0,s:0,done:false},
     rope:50,timer:QTIME,iv:null,over:false};
}

function genQ(){ const m=DIFFS[diff].m,a=Math.ceil(Math.random()*m),b=Math.ceil(Math.random()*m); return{txt:`${a} + ${b} = ?`,ans:a+b}; }
function genQs(){ return Array.from({length:TOTAL},genQ); }

// ‚îÄ‚îÄ Screens ‚îÄ‚îÄ
function show(id){ document.querySelectorAll('.screen').forEach(s=>s.classList.remove('active')); document.getElementById(id).classList.add('active'); }

// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
// BUILD KEYPAD ‚Äî FIXED: no double-fire on mobile
// Uses pointer events (pointerdown) which fire
// exactly once regardless of touch or mouse input.
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
function buildPad(id, tn) {
  const p = document.getElementById(id);
  p.innerHTML = '';

  function makeKey(label, cls, action) {
    const b = document.createElement('button');
    b.className = 'key ' + cls;
    b.textContent = label;
    b.setAttribute('type', 'button');

    // ‚îÄ‚îÄ‚îÄ THE FIX ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
    // Use pointerdown instead of combining onclick +
    // ontouchstart. Pointer events fire exactly ONCE
    // per physical interaction on all devices (mouse,
    // touch, stylus), eliminating the ghost double-fire.
    // preventDefault() stops any subsequent synthetic
    // mouse/click events the browser might still dispatch.
    b.addEventListener('pointerdown', function(e) {
      e.preventDefault();
      kp(tn, action);
    });
    // ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ

    p.appendChild(b);
    return b;
  }

  // Digit keys 1‚Äì9
  [1,2,3,4,5,6,7,8,9].forEach(n => makeKey(String(n), 'digit', String(n)));

  // Clear, 0, Submit
  makeKey('‚úï Clear', 'clear', 'clear');
  makeKey('0',       'digit', '0');
  makeKey('‚úì OK',    'submit','submit');
}

function kp(tn,k){
  if(G.over)return;
  const t=tn===1?G.t1:G.t2; if(t.done)return;
  const el=document.getElementById(`t${tn}In`);
  if(k==='clear')el.value='';
  else if(k==='submit')submit(tn);
  else if(el.value.length<4)el.value+=k;
}

function submit(tn){
  if(G.over)return;
  const t=tn===1?G.t1:G.t2; if(t.done)return;
  const el=document.getElementById(`t${tn}In`);
  const v=parseInt(el.value,10); if(isNaN(v))return;

  if(v===t.qs[t.i].ans){
    sfxOk(); t.s++; t.i++;
    flash(tn); moveRope(tn); refreshUI();
    el.value='';
    el.classList.add('flash-ok'); setTimeout(()=>el.classList.remove('flash-ok'),480);

    if(G.rope<=10){end(1);return;}
    if(G.rope>=90){end(2);return;}

    if(t.i>=TOTAL){
      t.done=true; document.getElementById(`t${tn}Panel`).classList.add('done');
      if(G.t1.done&&G.t2.done){end(0);return;}
    } else loadQ(tn);
    resetTimer();
  } else {
    sfxNo();
    el.classList.add('shake'); el.style.borderColor='#E05252';
    setTimeout(()=>{el.classList.remove('shake');el.style.borderColor='';el.value='';},450);
  }
}

function moveRope(tn){
  G.rope = tn===1 ? Math.max(0,G.rope-STEP) : Math.min(100,G.rope+STEP);
  const stage=document.getElementById('ropeStage');
  const offset=((G.rope-50)/100)*stage.offsetWidth*0.72;
  document.getElementById('movers').style.transform=`translateX(${offset}px)`;
}

function flash(tn){
  const el=document.getElementById(`flashT${tn}`);
  el.classList.remove('show'); void el.offsetWidth; el.classList.add('show');
  setTimeout(()=>el.classList.remove('show'),650);
}

function refreshUI(){
  document.getElementById('t1Score').textContent=G.t1.s;
  document.getElementById('t2Score').textContent=G.t2.s;
  document.getElementById('aT1').textContent=G.t1.s;
  document.getElementById('aT2').textContent=G.t2.s;
  document.getElementById('t1Prog').style.width=(G.t1.s/TOTAL*100)+'%';
  document.getElementById('t2Prog').style.width=(G.t2.s/TOTAL*100)+'%';
}

function loadQ(tn){
  const t=tn===1?G.t1:G.t2;
  document.getElementById(`t${tn}Q`).textContent=t.qs[t.i].txt;
  document.getElementById(`t${tn}Badge`).textContent=`${t.i+1} / ${TOTAL}`;
  document.getElementById(`t${tn}In`).value='';
}

function startTimer(){
  G.timer=QTIME;
  const el=document.getElementById('timerEl'); el.classList.remove('urgent');
  clearInterval(G.iv);
  G.iv=setInterval(()=>{
    G.timer--; el.textContent=G.timer;
    if(G.timer<=3)el.classList.add('urgent');
    if(G.timer<=0){
      [1,2].forEach(tn=>{
        const t=tn===1?G.t1:G.t2; if(t.done)return;
        t.i++; if(t.i>=TOTAL){t.done=true;document.getElementById(`t${tn}Panel`).classList.add('done');}
        else loadQ(tn);
      });
      if(G.t1.done&&G.t2.done){end(0);return;}
      resetTimer();
    }
  },1000);
}
function resetTimer(){clearInterval(G.iv);startTimer();}

function end(w){
  G.over=true; clearInterval(G.iv);
  if(w===0){if(G.t1.s>G.t2.s)w=1;else if(G.t2.s>G.t1.s)w=2;}
  setTimeout(()=>{
    show('winner-screen');
    const b=document.getElementById('winnerBadge');
    if(w===1){b.textContent='üèÖ Team 1 Wins!';b.className='winner-team-name blue';}
    else if(w===2){b.textContent='üèÖ Team 2 Wins!';b.className='winner-team-name red';}
    else{b.textContent="ü§ù It's a Draw!";b.className='winner-team-name draw';}
    document.getElementById('finalT1').textContent=G.t1.s;
    document.getElementById('finalT2').textContent=G.t2.s;
    sfxWin(); spawnConfetti();
  },550);
}

function spawnConfetti(){
  const c=document.getElementById('confetti'); c.innerHTML='';
  const cols=['#FFD600','#1A4FC4','#C41A1A','#2E7D32','#FF6F00','#fff','#E91E63','#00BCD4'];
  for(let i=0;i<150;i++){
    const p=document.createElement('div'); p.className='conf';
    p.style.cssText=`left:${Math.random()*100}vw;width:${Math.random()*9+5}px;height:${Math.random()*9+5}px;background:${cols[Math.floor(Math.random()*cols.length)]};border-radius:${Math.random()>.5?'50%':'3px'};animation-duration:${Math.random()*2.5+2}s;animation-delay:${Math.random()*2}s;`;
    c.appendChild(p);
  }
  setTimeout(()=>c.innerHTML='',6500);
}

function initGame(){
  resetG();
  G.t1.qs=genQs(); G.t2.qs=genQs();
  document.getElementById('t1Panel').classList.remove('done');
  document.getElementById('t2Panel').classList.remove('done');
  document.getElementById('movers').style.transform='translateX(0)';
  document.getElementById('timerEl').classList.remove('urgent');
  buildPad('t1Pad',1); buildPad('t2Pad',2);
  loadQ(1); loadQ(2); refreshUI();
  startTimer();
  show('game-screen');
}

// ‚îÄ‚îÄ Events ‚îÄ‚îÄ
document.querySelectorAll('.diff-btn').forEach(b=>{
  b.addEventListener('click',()=>{
    document.querySelectorAll('.diff-btn').forEach(x=>x.classList.remove('active'));
    b.classList.add('active'); diff=b.dataset.diff;
  });
});
document.getElementById('startBtn').addEventListener('click',()=>{try{ac();}catch(e){}initGame();});
document.getElementById('playAgainBtn').addEventListener('click',()=>{document.getElementById('confetti').innerHTML='';show('start-screen');});

// Physical keyboard (Team 1)
document.addEventListener('keydown',e=>{
  if(!document.getElementById('game-screen').classList.contains('active'))return;
  if('0123456789'.includes(e.key)&&!e.ctrlKey&&!e.metaKey){kp(1,e.key);e.preventDefault();}
  if(e.key==='Enter'){kp(1,'submit');e.preventDefault();}
  if(e.key==='Backspace'){kp(1,'clear');e.preventDefault();}
});
</script>
</body>
</html>